function y(s){return s&&s.__esModule?s.default:s}function Le(s){Object.defineProperty(s,"__esModule",{value:!0,configurable:!0})}function P(s,X,m,e){Object.defineProperty(s,X,{get:m,set:e,enumerable:!0,configurable:!0})}var ye=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},N=ye.parcelRequire11ea,Ve=N.register;Ve("7TU6f",function(s,X){Le(s.exports),P(s.exports,"DiffEditor",function(){return ve}),P(s.exports,"useMonaco",function(){return Me}),P(s.exports,"Editor",function(){return K}),P(s.exports,"default",function(){return me}),P(s.exports,"loader",function(){return N("67Uvd").default});var m=N("67Uvd"),e=N("gGL7e"),te={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},I=te,ne={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ue=ne;function ie({children:r}){return y(e).createElement("div",{style:ue.container},r)}var de=ie,ae=de;function oe({width:r,height:n,isEditorReady:i,loading:t,_ref:p,className:g,wrapperProps:M}){return y(e).createElement("section",{style:{...I.wrapper,width:r,height:n},...M},!i&&y(e).createElement(ae,null,t),y(e).createElement("div",{ref:p,style:{...I.fullWidth,...!i&&I.hide},className:g}))}var ce=oe,Y=(0,e.memo)(ce);function le(r){(0,e.useEffect)(r,[])}var j=le;function se(r,n,i=!0){let t=(0,e.useRef)(!0);(0,e.useEffect)(t.current||!i?()=>{t.current=!1}:r,n)}var h=se;function V(){}function x(r,n,i,t){return fe(r,t)||$e(r,n,i,t)}function fe(r,n){return r.editor.getModel(Z(r,n))}function $e(r,n,i,t){return r.editor.createModel(n,i,t?Z(r,t):void 0)}function Z(r,n){return r.Uri.parse(n)}function pe({original:r,modified:n,language:i,originalLanguage:t,modifiedLanguage:p,originalModelPath:g,modifiedModelPath:M,keepCurrentOriginalModel:E=!1,keepCurrentModifiedModel:F=!1,theme:R="light",loading:U="Loading...",options:w={},height:G="100%",width:q="100%",className:z,wrapperProps:H={},beforeMount:W=V,onMount:A=V}){let[v,S]=(0,e.useState)(!1),[C,o]=(0,e.useState)(!0),c=(0,e.useRef)(null),a=(0,e.useRef)(null),O=(0,e.useRef)(null),f=(0,e.useRef)(A),u=(0,e.useRef)(W),L=(0,e.useRef)(!1);j(()=>{let d=m.default.init();return d.then(l=>(a.current=l)&&o(!1)).catch(l=>l?.type!=="cancelation"&&console.error("Monaco initialization: error:",l)),()=>c.current?k():d.cancel()}),h(()=>{if(c.current&&a.current){let d=c.current.getOriginalEditor(),l=x(a.current,r||"",t||i||"text",g||"");l!==d.getModel()&&d.setModel(l)}},[g],v),h(()=>{if(c.current&&a.current){let d=c.current.getModifiedEditor(),l=x(a.current,n||"",p||i||"text",M||"");l!==d.getModel()&&d.setModel(l)}},[M],v),h(()=>{let d=c.current.getModifiedEditor();d.getOption(a.current.editor.EditorOption.readOnly)?d.setValue(n||""):n!==d.getValue()&&(d.executeEdits("",[{range:d.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),d.pushUndoStop())},[n],v),h(()=>{c.current?.getModel()?.original.setValue(r||"")},[r],v),h(()=>{let{original:d,modified:l}=c.current.getModel();a.current.editor.setModelLanguage(d,t||i||"text"),a.current.editor.setModelLanguage(l,p||i||"text")},[i,t,p],v),h(()=>{a.current?.editor.setTheme(R)},[R],v),h(()=>{c.current?.updateOptions(w)},[w],v);let D=(0,e.useCallback)(()=>{if(!a.current)return;u.current(a.current);let d=x(a.current,r||"",t||i||"text",g||""),l=x(a.current,n||"",p||i||"text",M||"");c.current?.setModel({original:d,modified:l})},[i,n,p,r,t,g,M]),T=(0,e.useCallback)(()=>{!L.current&&O.current&&(c.current=a.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...w}),D(),a.current?.editor.setTheme(R),S(!0),L.current=!0)},[w,R,D]);(0,e.useEffect)(()=>{v&&f.current(c.current,a.current)},[v]),(0,e.useEffect)(()=>{!C&&!v&&T()},[C,v,T]);function k(){let d=c.current?.getModel();E||d?.original?.dispose(),F||d?.modified?.dispose(),c.current?.dispose()}return y(e).createElement(Y,{width:q,height:G,isEditorReady:v,loading:U,_ref:O,className:z,wrapperProps:H})}var ge=pe,ve=(0,e.memo)(ge);function he(){let[r,n]=(0,e.useState)(m.default.__getMonacoInstance());return j(()=>{let i;return r||(i=m.default.init(),i.then(t=>{n(t)})),()=>i?.cancel()}),r}var Me=he;function we(r){let n=(0,e.useRef)();return(0,e.useEffect)(()=>{n.current=r},[r]),n.current}var Re=we,_=new Map;function Ee({defaultValue:r,defaultLanguage:n,defaultPath:i,value:t,language:p,path:g,theme:M="light",line:E,loading:F="Loading...",options:R={},overrideServices:U={},saveViewState:w=!0,keepCurrentModel:G=!1,width:q="100%",height:z="100%",className:H,wrapperProps:W={},beforeMount:A=V,onMount:v=V,onChange:S,onValidate:C=V}){let[o,c]=(0,e.useState)(!1),[a,O]=(0,e.useState)(!0),f=(0,e.useRef)(null),u=(0,e.useRef)(null),L=(0,e.useRef)(null),D=(0,e.useRef)(v),T=(0,e.useRef)(A),k=(0,e.useRef)(),d=(0,e.useRef)(t),l=Re(g),ee=(0,e.useRef)(!1),B=(0,e.useRef)(!1);j(()=>{let $=m.default.init();return $.then(b=>(f.current=b)&&O(!1)).catch(b=>b?.type!=="cancelation"&&console.error("Monaco initialization: error:",b)),()=>u.current?xe():$.cancel()}),h(()=>{let $=x(f.current,r||t||"",n||p||"",g||i||"");$!==u.current?.getModel()&&(w&&_.set(l,u.current?.saveViewState()),u.current?.setModel($),w&&u.current?.restoreViewState(_.get(g)))},[g],o),h(()=>{u.current?.updateOptions(R)},[R],o),h(()=>{!u.current||t===void 0||(u.current.getOption(f.current.editor.EditorOption.readOnly)?u.current.setValue(t):t!==u.current.getValue()&&(B.current=!0,u.current.executeEdits("",[{range:u.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),u.current.pushUndoStop(),B.current=!1))},[t],o),h(()=>{let $=u.current?.getModel();$&&p&&f.current?.editor.setModelLanguage($,p)},[p],o),h(()=>{E!==void 0&&u.current?.revealLine(E)},[E],o),h(()=>{f.current?.editor.setTheme(M)},[M],o);let re=(0,e.useCallback)(()=>{if(!(!L.current||!f.current)&&!ee.current){T.current(f.current);let $=g||i,b=x(f.current,t||r||"",n||p||"",$||"");u.current=f.current?.editor.create(L.current,{model:b,automaticLayout:!0,...R},U),w&&u.current.restoreViewState(_.get($)),f.current.editor.setTheme(M),E!==void 0&&u.current.revealLine(E),c(!0),ee.current=!0}},[r,n,i,t,p,g,R,U,w,M,E]);(0,e.useEffect)(()=>{o&&D.current(u.current,f.current)},[o]),(0,e.useEffect)(()=>{!a&&!o&&re()},[a,o,re]),d.current=t,(0,e.useEffect)(()=>{o&&S&&(k.current?.dispose(),k.current=u.current?.onDidChangeModelContent($=>{B.current||S(u.current.getValue(),$)}))},[o,S]),(0,e.useEffect)(()=>{if(o){let $=f.current.editor.onDidChangeMarkers(b=>{let J=u.current.getModel()?.uri;if(J&&b.find(Q=>Q.path===J.path)){let Q=f.current.editor.getModelMarkers({resource:J});C?.(Q)}});return()=>{$?.dispose()}}return()=>{}},[o,C]);function xe(){k.current?.dispose(),G?w&&_.set(g,u.current.saveViewState()):u.current.getModel()?.dispose(),u.current.dispose()}return y(e).createElement(Y,{width:q,height:z,isEditorReady:o,loading:F,_ref:L,className:H,wrapperProps:W})}var be=Ee,K=(0,e.memo)(be),me=K});
