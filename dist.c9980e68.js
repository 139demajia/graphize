function S(s){return s&&s.__esModule?s.default:s}function Le(s){Object.defineProperty(s,"__esModule",{value:!0,configurable:!0})}function P(s,Q,m,e){Object.defineProperty(s,Q,{get:m,set:e,enumerable:!0,configurable:!0})}var Se=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},I=Se.parcelRequire11ea,ye=I.register;ye("4JsKN",function(s,Q){Le(s.exports),P(s.exports,"DiffEditor",function(){return ge}),P(s.exports,"useMonaco",function(){return he}),P(s.exports,"Editor",function(){return Z}),P(s.exports,"default",function(){return me}),P(s.exports,"loader",function(){return I("gfSw3").default});var m=I("gfSw3"),e=I("gGL7e"),te={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},U=te,ce={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ne=ce;function ae({children:r}){return S(e).createElement("div",{style:ne.container},r)}var ue=ae,ie=ue;function oe({width:r,height:c,isEditorReady:a,loading:t,_ref:$,className:p,wrapperProps:h}){return S(e).createElement("section",{style:{...U.wrapper,width:r,height:c},...h},!a&&S(e).createElement(ie,null,t),S(e).createElement("div",{ref:$,style:{...U.fullWidth,...!a&&U.hide},className:p}))}var le=oe,X=(0,e.memo)(le);function de(r){(0,e.useEffect)(r,[])}var j=de;function se(r,c,a=!0){let t=(0,e.useRef)(!0);(0,e.useEffect)(t.current||!a?()=>{t.current=!1}:r,c)}var v=se;function y(){}function x(r,c,a,t){return fe(r,t)||be(r,c,a,t)}function fe(r,c){return r.editor.getModel(Y(r,c))}function be(r,c,a,t){return r.editor.createModel(c,a,t?Y(r,t):void 0)}function Y(r,c){return r.Uri.parse(c)}function $e({original:r,modified:c,language:a,originalLanguage:t,modifiedLanguage:$,originalModelPath:p,modifiedModelPath:h,keepCurrentOriginalModel:R=!1,keepCurrentModifiedModel:F=!1,theme:w="light",loading:D="Loading...",options:M={},height:G="100%",width:q="100%",className:z,wrapperProps:H={},beforeMount:J=y,onMount:W=y}){let[g,V]=(0,e.useState)(!1),[C,o]=(0,e.useState)(!0),l=(0,e.useRef)(null),i=(0,e.useRef)(null),O=(0,e.useRef)(null),f=(0,e.useRef)(W),n=(0,e.useRef)(J),L=(0,e.useRef)(!1);j(()=>{let u=m.default.init();return u.then(d=>(i.current=d)&&o(!1)).catch(d=>d?.type!=="cancelation"&&console.error("Monaco initialization: error:",d)),()=>l.current?k():u.cancel()}),v(()=>{if(l.current&&i.current){let u=l.current.getOriginalEditor(),d=x(i.current,r||"",t||a||"text",p||"");d!==u.getModel()&&u.setModel(d)}},[p],g),v(()=>{if(l.current&&i.current){let u=l.current.getModifiedEditor(),d=x(i.current,c||"",$||a||"text",h||"");d!==u.getModel()&&u.setModel(d)}},[h],g),v(()=>{let u=l.current.getModifiedEditor();u.getOption(i.current.editor.EditorOption.readOnly)?u.setValue(c||""):c!==u.getValue()&&(u.executeEdits("",[{range:u.getModel().getFullModelRange(),text:c||"",forceMoveMarkers:!0}]),u.pushUndoStop())},[c],g),v(()=>{l.current?.getModel()?.original.setValue(r||"")},[r],g),v(()=>{let{original:u,modified:d}=l.current.getModel();i.current.editor.setModelLanguage(u,t||a||"text"),i.current.editor.setModelLanguage(d,$||a||"text")},[a,t,$],g),v(()=>{i.current?.editor.setTheme(w)},[w],g),v(()=>{l.current?.updateOptions(M)},[M],g);let N=(0,e.useCallback)(()=>{if(!i.current)return;n.current(i.current);let u=x(i.current,r||"",t||a||"text",p||""),d=x(i.current,c||"",$||a||"text",h||"");l.current?.setModel({original:u,modified:d})},[a,c,$,r,t,p,h]),T=(0,e.useCallback)(()=>{!L.current&&O.current&&(l.current=i.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...M}),N(),i.current?.editor.setTheme(w),V(!0),L.current=!0)},[M,w,N]);(0,e.useEffect)(()=>{g&&f.current(l.current,i.current)},[g]),(0,e.useEffect)(()=>{!C&&!g&&T()},[C,g,T]);function k(){let u=l.current?.getModel();R||u?.original?.dispose(),F||u?.modified?.dispose(),l.current?.dispose()}return S(e).createElement(X,{width:q,height:G,isEditorReady:g,loading:D,_ref:O,className:z,wrapperProps:H})}var pe=$e,ge=(0,e.memo)(pe);function ve(){let[r,c]=(0,e.useState)(m.default.__getMonacoInstance());return j(()=>{let a;return r||(a=m.default.init(),a.then(t=>{c(t)})),()=>a?.cancel()}),r}var he=ve;function Me(r){let c=(0,e.useRef)();return(0,e.useEffect)(()=>{c.current=r},[r]),c.current}var we=Me,_=new Map;function Re({defaultValue:r,defaultLanguage:c,defaultPath:a,value:t,language:$,path:p,theme:h="light",line:R,loading:F="Loading...",options:w={},overrideServices:D={},saveViewState:M=!0,keepCurrentModel:G=!1,width:q="100%",height:z="100%",className:H,wrapperProps:J={},beforeMount:W=y,onMount:g=y,onChange:V,onValidate:C=y}){let[o,l]=(0,e.useState)(!1),[i,O]=(0,e.useState)(!0),f=(0,e.useRef)(null),n=(0,e.useRef)(null),L=(0,e.useRef)(null),N=(0,e.useRef)(g),T=(0,e.useRef)(W),k=(0,e.useRef)(),u=(0,e.useRef)(t),d=we(p),ee=(0,e.useRef)(!1),A=(0,e.useRef)(!1);j(()=>{let b=m.default.init();return b.then(E=>(f.current=E)&&O(!1)).catch(E=>E?.type!=="cancelation"&&console.error("Monaco initialization: error:",E)),()=>n.current?xe():b.cancel()}),v(()=>{let b=x(f.current,r||t||"",c||$||"",p||a||"");b!==n.current?.getModel()&&(M&&_.set(d,n.current?.saveViewState()),n.current?.setModel(b),M&&n.current?.restoreViewState(_.get(p)))},[p],o),v(()=>{n.current?.updateOptions(w)},[w],o),v(()=>{!n.current||t===void 0||(n.current.getOption(f.current.editor.EditorOption.readOnly)?n.current.setValue(t):t!==n.current.getValue()&&(A.current=!0,n.current.executeEdits("",[{range:n.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),n.current.pushUndoStop(),A.current=!1))},[t],o),v(()=>{let b=n.current?.getModel();b&&$&&f.current?.editor.setModelLanguage(b,$)},[$],o),v(()=>{R!==void 0&&n.current?.revealLine(R)},[R],o),v(()=>{f.current?.editor.setTheme(h)},[h],o);let re=(0,e.useCallback)(()=>{if(!(!L.current||!f.current)&&!ee.current){T.current(f.current);let b=p||a,E=x(f.current,t||r||"",c||$||"",b||"");n.current=f.current?.editor.create(L.current,{model:E,automaticLayout:!0,...w},D),M&&n.current.restoreViewState(_.get(b)),f.current.editor.setTheme(h),R!==void 0&&n.current.revealLine(R),l(!0),ee.current=!0}},[r,c,a,t,$,p,w,D,M,h,R]);(0,e.useEffect)(()=>{o&&N.current(n.current,f.current)},[o]),(0,e.useEffect)(()=>{!i&&!o&&re()},[i,o,re]),u.current=t,(0,e.useEffect)(()=>{o&&V&&(k.current?.dispose(),k.current=n.current?.onDidChangeModelContent(b=>{A.current||V(n.current.getValue(),b)}))},[o,V]),(0,e.useEffect)(()=>{if(o){let b=f.current.editor.onDidChangeMarkers(E=>{let B=n.current.getModel()?.uri;if(B&&E.find(K=>K.path===B.path)){let K=f.current.editor.getModelMarkers({resource:B});C?.(K)}});return()=>{b?.dispose()}}return()=>{}},[o,C]);function xe(){k.current?.dispose(),G?M&&_.set(p,n.current.saveViewState()):n.current.getModel()?.dispose(),n.current.dispose()}return S(e).createElement(X,{width:q,height:z,isEditorReady:o,loading:F,_ref:L,className:H,wrapperProps:J})}var Ee=Re,Z=(0,e.memo)(Ee),me=Z});
