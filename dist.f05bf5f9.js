(function(){function m(d){return d&&d.__esModule?d.default:d}function te(d){Object.defineProperty(d,"__esModule",{value:!0,configurable:!0})}function V(d,Q,x,e){Object.defineProperty(d,Q,{get:x,set:e,enumerable:!0,configurable:!0})}var ne=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},_=ne.parcelRequire11ea,ae=_.register;ae("dv7Rj",function(d,Q){te(d.exports),V(d.exports,"DiffEditor",function(){return Me}),V(d.exports,"useMonaco",function(){return Re}),V(d.exports,"Editor",function(){return Z}),V(d.exports,"default",function(){return Le}),V(d.exports,"loader",function(){return _("7HHK2").default});var x=_("7HHK2"),e=_("4NbAi"),ue={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},I=ue,ie={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ce=ie;function oe({children:r}){return m(e).createElement("div",{style:ce.container},r)}var le=oe,fe=le;function de({width:r,height:n,isEditorReady:u,loading:t,_ref:p,className:g,wrapperProps:h}){return m(e).createElement("section",{style:{...I.wrapper,width:r,height:n},...h},!u&&m(e).createElement(fe,null,t),m(e).createElement("div",{ref:p,style:{...I.fullWidth,...!u&&I.hide},className:g}))}var se=de,X=(0,e.memo)(se);function $e(r){(0,e.useEffect)(r,[])}var U=$e;function pe(r,n,u=!0){let t=(0,e.useRef)(!0);(0,e.useEffect)(t.current||!u?()=>{t.current=!1}:r,n)}var b=pe;function S(){}function y(r,n,u,t){return ge(r,t)||ve(r,n,u,t)}function ge(r,n){return r.editor.getModel(Y(r,n))}function ve(r,n,u,t){return r.editor.createModel(n,u,t?Y(r,t):void 0)}function Y(r,n){return r.Uri.parse(n)}function be({original:r,modified:n,language:u,originalLanguage:t,modifiedLanguage:p,originalModelPath:g,modifiedModelPath:h,keepCurrentOriginalModel:R=!1,keepCurrentModifiedModel:j=!1,theme:w="light",loading:N="Loading...",options:M={},height:A="100%",width:F="100%",className:K,wrapperProps:q={},beforeMount:z=S,onMount:W=S}){let[v,C]=(0,e.useState)(!1),[O,o]=(0,e.useState)(!0),l=(0,e.useRef)(null),c=(0,e.useRef)(null),k=(0,e.useRef)(null),s=(0,e.useRef)(W),a=(0,e.useRef)(z),L=(0,e.useRef)(!1);U(()=>{let i=x.default.init();return i.then(f=>(c.current=f)&&o(!1)).catch(f=>f?.type!=="cancelation"&&console.error("Monaco initialization: error:",f)),()=>l.current?P():i.cancel()}),b(()=>{if(l.current&&c.current){let i=l.current.getOriginalEditor(),f=y(c.current,r||"",t||u||"text",g||"");f!==i.getModel()&&i.setModel(f)}},[g],v),b(()=>{if(l.current&&c.current){let i=l.current.getModifiedEditor(),f=y(c.current,n||"",p||u||"text",h||"");f!==i.getModel()&&i.setModel(f)}},[h],v),b(()=>{let i=l.current.getModifiedEditor();i.getOption(c.current.editor.EditorOption.readOnly)?i.setValue(n||""):n!==i.getValue()&&(i.executeEdits("",[{range:i.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),i.pushUndoStop())},[n],v),b(()=>{l.current?.getModel()?.original.setValue(r||"")},[r],v),b(()=>{let{original:i,modified:f}=l.current.getModel();c.current.editor.setModelLanguage(i,t||u||"text"),c.current.editor.setModelLanguage(f,p||u||"text")},[u,t,p],v),b(()=>{c.current?.editor.setTheme(w)},[w],v),b(()=>{l.current?.updateOptions(M)},[M],v);let D=(0,e.useCallback)(()=>{if(!c.current)return;a.current(c.current);let i=y(c.current,r||"",t||u||"text",g||""),f=y(c.current,n||"",p||u||"text",h||"");l.current?.setModel({original:i,modified:f})},[u,n,p,r,t,g,h]),T=(0,e.useCallback)(()=>{!L.current&&k.current&&(l.current=c.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...M}),D(),c.current?.editor.setTheme(w),C(!0),L.current=!0)},[M,w,D]);(0,e.useEffect)(()=>{v&&s.current(l.current,c.current)},[v]),(0,e.useEffect)(()=>{!O&&!v&&T()},[O,v,T]);function P(){let i=l.current?.getModel();R||i?.original?.dispose(),j||i?.modified?.dispose(),l.current?.dispose()}return m(e).createElement(X,{width:F,height:A,isEditorReady:v,loading:N,_ref:k,className:K,wrapperProps:q})}var he=be,Me=(0,e.memo)(he);function we(){let[r,n]=(0,e.useState)(x.default.__getMonacoInstance());return U(()=>{let u;return r||(u=x.default.init(),u.then(t=>{n(t)})),()=>u?.cancel()}),r}var Re=we;function Ee(r){let n=(0,e.useRef)();return(0,e.useEffect)(()=>{n.current=r},[r]),n.current}var me=Ee,H=new Map;function xe({defaultValue:r,defaultLanguage:n,defaultPath:u,value:t,language:p,path:g,theme:h="light",line:R,loading:j="Loading...",options:w={},overrideServices:N={},saveViewState:M=!0,keepCurrentModel:A=!1,width:F="100%",height:K="100%",className:q,wrapperProps:z={},beforeMount:W=S,onMount:v=S,onChange:C,onValidate:O=S}){let[o,l]=(0,e.useState)(!1),[c,k]=(0,e.useState)(!0),s=(0,e.useRef)(null),a=(0,e.useRef)(null),L=(0,e.useRef)(null),D=(0,e.useRef)(v),T=(0,e.useRef)(W),P=(0,e.useRef)(),i=(0,e.useRef)(t),f=me(g),ee=(0,e.useRef)(!1),B=(0,e.useRef)(!1);U(()=>{let $=x.default.init();return $.then(E=>(s.current=E)&&k(!1)).catch(E=>E?.type!=="cancelation"&&console.error("Monaco initialization: error:",E)),()=>a.current?Ve():$.cancel()}),b(()=>{let $=y(s.current,r||t||"",n||p||"",g||u||"");$!==a.current?.getModel()&&(M&&H.set(f,a.current?.saveViewState()),a.current?.setModel($),M&&a.current?.restoreViewState(H.get(g)))},[g],o),b(()=>{a.current?.updateOptions(w)},[w],o),b(()=>{!a.current||t===void 0||(a.current.getOption(s.current.editor.EditorOption.readOnly)?a.current.setValue(t):t!==a.current.getValue()&&(B.current=!0,a.current.executeEdits("",[{range:a.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),a.current.pushUndoStop(),B.current=!1))},[t],o),b(()=>{let $=a.current?.getModel();$&&p&&s.current?.editor.setModelLanguage($,p)},[p],o),b(()=>{R!==void 0&&a.current?.revealLine(R)},[R],o),b(()=>{s.current?.editor.setTheme(h)},[h],o);let re=(0,e.useCallback)(()=>{if(!(!L.current||!s.current)&&!ee.current){T.current(s.current);let $=g||u,E=y(s.current,t||r||"",n||p||"",$||"");a.current=s.current?.editor.create(L.current,{model:E,automaticLayout:!0,...w},N),M&&a.current.restoreViewState(H.get($)),s.current.editor.setTheme(h),R!==void 0&&a.current.revealLine(R),l(!0),ee.current=!0}},[r,n,u,t,p,g,w,N,M,h,R]);(0,e.useEffect)(()=>{o&&D.current(a.current,s.current)},[o]),(0,e.useEffect)(()=>{!c&&!o&&re()},[c,o,re]),i.current=t,(0,e.useEffect)(()=>{o&&C&&(P.current?.dispose(),P.current=a.current?.onDidChangeModelContent($=>{B.current||C(a.current.getValue(),$)}))},[o,C]),(0,e.useEffect)(()=>{if(o){let $=s.current.editor.onDidChangeMarkers(E=>{let G=a.current.getModel()?.uri;if(G&&E.find(J=>J.path===G.path)){let J=s.current.editor.getModelMarkers({resource:G});O?.(J)}});return()=>{$?.dispose()}}return()=>{}},[o,O]);function Ve(){P.current?.dispose(),A?M&&H.set(g,a.current.saveViewState()):a.current.getModel()?.dispose(),a.current.dispose()}return m(e).createElement(X,{width:F,height:K,isEditorReady:o,loading:j,_ref:L,className:q,wrapperProps:z})}var ye=xe,Z=(0,e.memo)(ye),Le=Z})})();
