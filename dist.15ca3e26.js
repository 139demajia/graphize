(function(){function m(l){return l&&l.__esModule?l.default:l}function te(l){Object.defineProperty(l,"__esModule",{value:!0,configurable:!0})}function V(l,X,x,e){Object.defineProperty(l,X,{get:x,set:e,enumerable:!0,configurable:!0})}var ne=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},_=ne.parcelRequire11ea,ue=_.register;ue("8n50d",function(l,X){te(l.exports),V(l.exports,"DiffEditor",function(){return Me}),V(l.exports,"useMonaco",function(){return Re}),V(l.exports,"Editor",function(){return K}),V(l.exports,"default",function(){return Le}),V(l.exports,"loader",function(){return _("7GJ5p").default});var x=_("7GJ5p"),e=_("2Ly8r"),ie={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},U=ie,ae={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},oe=ae;function ce({children:r}){return m(e).createElement("div",{style:oe.container},r)}var fe=ce,de=fe;function le({width:r,height:n,isEditorReady:i,loading:t,_ref:p,className:g,wrapperProps:b}){return m(e).createElement("section",{style:{...U.wrapper,width:r,height:n},...b},!i&&m(e).createElement(de,null,t),m(e).createElement("div",{ref:p,style:{...U.fullWidth,...!i&&U.hide},className:g}))}var se=le,Y=(0,e.memo)(se);function $e(r){(0,e.useEffect)(r,[])}var G=$e;function pe(r,n,i=!0){let t=(0,e.useRef)(!0);(0,e.useEffect)(t.current||!i?()=>{t.current=!1}:r,n)}var h=pe;function S(){}function y(r,n,i,t){return ge(r,t)||ve(r,n,i,t)}function ge(r,n){return r.editor.getModel(Z(r,n))}function ve(r,n,i,t){return r.editor.createModel(n,i,t?Z(r,t):void 0)}function Z(r,n){return r.Uri.parse(n)}function he({original:r,modified:n,language:i,originalLanguage:t,modifiedLanguage:p,originalModelPath:g,modifiedModelPath:b,keepCurrentOriginalModel:R=!1,keepCurrentModifiedModel:J=!1,theme:w="light",loading:N="Loading...",options:M={},height:j="100%",width:F="100%",className:q,wrapperProps:z={},beforeMount:H=S,onMount:W=S}){let[v,C]=(0,e.useState)(!1),[O,c]=(0,e.useState)(!0),f=(0,e.useRef)(null),o=(0,e.useRef)(null),k=(0,e.useRef)(null),s=(0,e.useRef)(W),u=(0,e.useRef)(H),L=(0,e.useRef)(!1);G(()=>{let a=x.default.init();return a.then(d=>(o.current=d)&&c(!1)).catch(d=>d?.type!=="cancelation"&&console.error("Monaco initialization: error:",d)),()=>f.current?P():a.cancel()}),h(()=>{if(f.current&&o.current){let a=f.current.getOriginalEditor(),d=y(o.current,r||"",t||i||"text",g||"");d!==a.getModel()&&a.setModel(d)}},[g],v),h(()=>{if(f.current&&o.current){let a=f.current.getModifiedEditor(),d=y(o.current,n||"",p||i||"text",b||"");d!==a.getModel()&&a.setModel(d)}},[b],v),h(()=>{let a=f.current.getModifiedEditor();a.getOption(o.current.editor.EditorOption.readOnly)?a.setValue(n||""):n!==a.getValue()&&(a.executeEdits("",[{range:a.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),a.pushUndoStop())},[n],v),h(()=>{f.current?.getModel()?.original.setValue(r||"")},[r],v),h(()=>{let{original:a,modified:d}=f.current.getModel();o.current.editor.setModelLanguage(a,t||i||"text"),o.current.editor.setModelLanguage(d,p||i||"text")},[i,t,p],v),h(()=>{o.current?.editor.setTheme(w)},[w],v),h(()=>{f.current?.updateOptions(M)},[M],v);let T=(0,e.useCallback)(()=>{if(!o.current)return;u.current(o.current);let a=y(o.current,r||"",t||i||"text",g||""),d=y(o.current,n||"",p||i||"text",b||"");f.current?.setModel({original:a,modified:d})},[i,n,p,r,t,g,b]),I=(0,e.useCallback)(()=>{!L.current&&k.current&&(f.current=o.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...M}),T(),o.current?.editor.setTheme(w),C(!0),L.current=!0)},[M,w,T]);(0,e.useEffect)(()=>{v&&s.current(f.current,o.current)},[v]),(0,e.useEffect)(()=>{!O&&!v&&I()},[O,v,I]);function P(){let a=f.current?.getModel();R||a?.original?.dispose(),J||a?.modified?.dispose(),f.current?.dispose()}return m(e).createElement(Y,{width:F,height:j,isEditorReady:v,loading:N,_ref:k,className:q,wrapperProps:z})}var be=he,Me=(0,e.memo)(be);function we(){let[r,n]=(0,e.useState)(x.default.__getMonacoInstance());return G(()=>{let i;return r||(i=x.default.init(),i.then(t=>{n(t)})),()=>i?.cancel()}),r}var Re=we;function Ee(r){let n=(0,e.useRef)();return(0,e.useEffect)(()=>{n.current=r},[r]),n.current}var me=Ee,D=new Map;function xe({defaultValue:r,defaultLanguage:n,defaultPath:i,value:t,language:p,path:g,theme:b="light",line:R,loading:J="Loading...",options:w={},overrideServices:N={},saveViewState:M=!0,keepCurrentModel:j=!1,width:F="100%",height:q="100%",className:z,wrapperProps:H={},beforeMount:W=S,onMount:v=S,onChange:C,onValidate:O=S}){let[c,f]=(0,e.useState)(!1),[o,k]=(0,e.useState)(!0),s=(0,e.useRef)(null),u=(0,e.useRef)(null),L=(0,e.useRef)(null),T=(0,e.useRef)(v),I=(0,e.useRef)(W),P=(0,e.useRef)(),a=(0,e.useRef)(t),d=me(g),ee=(0,e.useRef)(!1),A=(0,e.useRef)(!1);G(()=>{let $=x.default.init();return $.then(E=>(s.current=E)&&k(!1)).catch(E=>E?.type!=="cancelation"&&console.error("Monaco initialization: error:",E)),()=>u.current?Ve():$.cancel()}),h(()=>{let $=y(s.current,r||t||"",n||p||"",g||i||"");$!==u.current?.getModel()&&(M&&D.set(d,u.current?.saveViewState()),u.current?.setModel($),M&&u.current?.restoreViewState(D.get(g)))},[g],c),h(()=>{u.current?.updateOptions(w)},[w],c),h(()=>{!u.current||t===void 0||(u.current.getOption(s.current.editor.EditorOption.readOnly)?u.current.setValue(t):t!==u.current.getValue()&&(A.current=!0,u.current.executeEdits("",[{range:u.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),u.current.pushUndoStop(),A.current=!1))},[t],c),h(()=>{let $=u.current?.getModel();$&&p&&s.current?.editor.setModelLanguage($,p)},[p],c),h(()=>{R!==void 0&&u.current?.revealLine(R)},[R],c),h(()=>{s.current?.editor.setTheme(b)},[b],c);let re=(0,e.useCallback)(()=>{if(!(!L.current||!s.current)&&!ee.current){I.current(s.current);let $=g||i,E=y(s.current,t||r||"",n||p||"",$||"");u.current=s.current?.editor.create(L.current,{model:E,automaticLayout:!0,...w},N),M&&u.current.restoreViewState(D.get($)),s.current.editor.setTheme(b),R!==void 0&&u.current.revealLine(R),f(!0),ee.current=!0}},[r,n,i,t,p,g,w,N,M,b,R]);(0,e.useEffect)(()=>{c&&T.current(u.current,s.current)},[c]),(0,e.useEffect)(()=>{!o&&!c&&re()},[o,c,re]),a.current=t,(0,e.useEffect)(()=>{c&&C&&(P.current?.dispose(),P.current=u.current?.onDidChangeModelContent($=>{A.current||C(u.current.getValue(),$)}))},[c,C]),(0,e.useEffect)(()=>{if(c){let $=s.current.editor.onDidChangeMarkers(E=>{let B=u.current.getModel()?.uri;if(B&&E.find(Q=>Q.path===B.path)){let Q=s.current.editor.getModelMarkers({resource:B});O?.(Q)}});return()=>{$?.dispose()}}return()=>{}},[c,O]);function Ve(){P.current?.dispose(),j?M&&D.set(g,u.current.saveViewState()):u.current.getModel()?.dispose(),u.current.dispose()}return m(e).createElement(Y,{width:F,height:q,isEditorReady:c,loading:J,_ref:L,className:z,wrapperProps:H})}var ye=xe,K=(0,e.memo)(ye),Le=K})})();
